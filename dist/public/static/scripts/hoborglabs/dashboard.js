var requirejs,require,define;(function(e){function c(e,t){return f.call(e,t)}function h(e,t){var n,r,i,s,o,a,f,l,c,h,p=t&&t.split("/"),d=u.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!a&&v&&v[r]&&(a=v[r],f=l)}!s&&a&&(s=a,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function p(t,r){return function(){return n.apply(e,l.call(arguments,0).concat([t,r]))}}function d(e){return function(t){return h(t,e)}}function v(e){return function(t){s[e]=t}}function m(n){if(c(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!c(s,n)&&!c(a,n))throw new Error("No "+n);return s[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function y(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice;r=function(e,t){var n,r=g(e),i=r[0];return e=r[1],i&&(i=h(i,t),n=m(i)),i?n&&n.normalize?e=n.normalize(e,d(t)):e=h(e,t):(e=h(e,t),r=g(e),i=r[0],e=r[1],i&&(n=m(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return p(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:y(e)}}},t=function(t,n,u,f){var l,h,d,g,y,b=[],w;f=f||t;if(typeof u=="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){g=r(n[y],f),h=g.f;if(h==="require")b[y]=i.require(t);else if(h==="exports")b[y]=i.exports(t),w=!0;else if(h==="module")l=b[y]=i.module(t);else if(c(s,h)||c(o,h)||c(a,h))b[y]=m(h);else{if(!g.p)throw new Error(t+" missing "+h);g.p.load(g.n,p(f,!0),v(h),{}),b[y]=s[h]}}d=u.apply(s[t],b);if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(d!==e||!w)s[t]=d}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){return typeof s=="string"?i[s]?i[s](o):m(r(s,o).f):(s.splice||(u=s,o.splice?(s=o,o=a,a=null):s=e),o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n)},n.config=function(e){return u=e,u.deps&&n(u.deps,u.callback),n},define=function(e,t,n){t.splice||(n=t,t=[]),!c(s,e)&&!c(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("almond",function(){}),!function(e,t){typeof module!="undefined"?module.exports=t():typeof define=="function"&&typeof define.amd=="object"?define("lib/ready",t):this[e]=t()}("domready",function(e){function h(e){c=1;while(e=t.shift())e()}var t=[],n,r=!1,i=document,s=i.documentElement,o=s.doScroll,u="DOMContentLoaded",a="addEventListener",f="onreadystatechange",l="readyState",c=/^loade|c/.test(i[l]);return i[a]&&i[a](u,n=function(){i.removeEventListener(u,n,r),h()},r),o&&i.attachEvent(f,n=function(){/^c/.test(i[l])&&(i.detachEvent(f,n),h())}),e=o?function(n){self!=top?c?n():t.push(n):function(){try{s.doScroll("left")}catch(t){return setTimeout(function(){e(n)},50)}n()}()}:function(e){c?e():t.push(e)}}),function(e){function H(n){function yt(e){return e&&typeof e=="object"&&!_t(e)&&et.call(e,"__wrapped__")?e:new Ct(e)}function wt(e){var t=e.length,n=t>=a;if(n){var r={},i=-1;while(++i<t){var s=u+e[i];(r[s]||(r[s]=[])).push(e[i])}}return function(t){if(n){var i=u+t;return r[i]&&Rn(r[i],t)>-1}return Rn(e,t)>-1}}function Et(e){return e.charCodeAt(0)}function St(e,t){var n=e.index,r=t.index;e=e.criteria,t=t.criteria;if(e!==t){if(e>t||typeof e=="undefined")return 1;if(e<t||typeof t=="undefined")return-1}return n<r?-1:1}function xt(e,t,n,r){function a(){var r=arguments,f=s?this:t;i||(e=t[o]),n.length&&(r=r.length?(r=dt.call(r),u?r.concat(n):n.concat(r)):n);if(this instanceof a){kt.prototype=e.prototype,f=new kt,kt.prototype=null;var l=e.apply(f,r);return en(l)?l:f}return e.apply(f,r)}var i=Zt(e),s=!n,o=t;if(s){var u=r;n=t}else if(!i){if(!r)throw new W;t=e}return a}function Tt(e){return"\\"+P[e]}function Nt(e){return Ht[e]}function Ct(e){this.__wrapped__=e}function kt(){}function Lt(e){var t=!1;if(!e||it.call(e)!=A)return t;var n=e.constructor;return(Zt(n)?n instanceof n:!0)?(Ut(e,function(e,n){t=n}),t===!1||et.call(e,t)):t}function At(e,t,n){t||(t=0),typeof n=="undefined"&&(n=e?e.length:0);var r=-1,s=n-t||0,o=i(s<0?0:s);while(++r<s)o[r]=e[t+r];return o}function Ot(e){return Bt[e]}function Mt(e){return it.call(e)==x}function Ft(e,n,r,i,s,o){var u=e;typeof n=="function"&&(i=r,r=n,n=!1);if(typeof r=="function"){r=typeof i=="undefined"?r:yt.createCallback(r,i,1),u=r(u);if(typeof u!="undefined")return u;u=e}var a=en(u);if(a){var f=it.call(u);if(!_[f])return u;var l=_t(u)}if(!a||!n)return a?l?At(u):jt({},u):u;var c=gt[f];switch(f){case N:case C:return new c(+u);case L:case M:return new c(u);case O:return c(u.source,d.exec(u))}s||(s=[]),o||(o=[]);var h=s.length;while(h--)if(s[h]==e)return o[h];return u=l?c(u.length):{},l&&(et.call(e,"index")&&(u.index=e.index),et.call(e,"input")&&(u.input=e.input)),s.push(e),o.push(u),(l?wn:zt)(e,function(e,i){u[i]=Ft(e,n,r,t,s,o)}),u}function It(e,t,n){return Ft(e,!0,t,n)}function Rt(e,t,n){var r;return t=yt.createCallback(t,n),zt(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Wt(e){var t=[];return Ut(e,function(e,n){Zt(e)&&t.push(n)}),t.sort()}function Xt(e,t){return e?et.call(e,t):!1}function Vt(e){var t=-1,n=Pt(e),r=n.length,i={};while(++t<r){var s=n[t];i[e[s]]=s}return i}function $t(e){return e===!0||e===!1||it.call(e)==N}function Jt(e){return e?typeof e=="object"&&it.call(e)==C:!1}function Kt(e){return e?e.nodeType===1:!1}function Qt(e){var t=!0;if(!e)return t;var n=it.call(e),r=e.length;return n==T||n==M||n==x||n==A&&typeof r=="number"&&Zt(e.splice)?!r:(zt(e,function(){return t=!1}),t)}function Gt(e,t,n,r,i,s){var u=n===o;if(typeof n=="function"&&!u){n=yt.createCallback(n,r,2);var a=n(e,t);if(typeof a!="undefined")return!!a}if(e===t)return e!==0||1/e==1/t;var f=typeof e,l=typeof t;if(e===e&&(!e||f!="function"&&f!="object")&&(!t||l!="function"&&l!="object"))return!1;if(e==null||t==null)return e===t;var c=it.call(e),h=it.call(t);c==x&&(c=A),h==x&&(h=A);if(c!=h)return!1;switch(c){case N:case C:return+e==+t;case L:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case O:case M:return e==z(t)}var p=c==T;if(!p){if(et.call(e,"__wrapped__ ")||et.call(t,"__wrapped__"))return Gt(e.__wrapped__||e,t.__wrapped__||t,n,r,i,s);if(c!=A)return!1;var d=e.constructor,v=t.constructor;if(d!=v&&!(Zt(d)&&d instanceof d&&Zt(v)&&v instanceof v))return!1}i||(i=[]),s||(s=[]);var m=i.length;while(m--)if(i[m]==e)return s[m]==t;var g=0;a=!0,i.push(e),s.push(t);if(p){m=e.length,g=t.length,a=g==e.length;if(!a&&!u)return a;while(g--){var y=m,b=t[g];if(u){while(y--)if(a=Gt(e[y],b,n,r,i,s))break}else if(!(a=Gt(e[g],b,n,r,i,s)))break}return a}return Ut(t,function(t,o,u){if(et.call(u,o))return g++,a=et.call(e,o)&&Gt(e[o],t,n,r,i,s)}),a&&!u&&Ut(e,function(e,t,n){if(et.call(n,t))return a=--g>-1}),a}function Yt(e){return ut(e)&&!at(parseFloat(e))}function Zt(e){return typeof e=="function"}function en(e){return e?D[typeof e]:!1}function tn(e){return rn(e)&&e!=+e}function nn(e){return e===null}function rn(e){return typeof e=="number"||it.call(e)==L}function on(e){return e?typeof e=="object"&&it.call(e)==O:!1}function un(e){return typeof e=="string"||it.call(e)==M}function an(e){return typeof e=="undefined"}function fn(e,t,n){var r=arguments,i=0,s=2;if(!en(e))return e;if(n===o)var u=r[3],a=r[4],f=r[5];else a=[],f=[],typeof n!="number"&&(s=r.length),s>3&&typeof r[s-2]=="function"?u=yt.createCallback(r[--s-1],r[s--],2):s>2&&typeof r[s-1]=="function"&&(u=r[--s]);while(++i<s)(_t(r[i])?wn:zt)(r[i],function(t,n){var r,i,s=t,l=e[n];if(t&&((i=_t(t))||sn(t))){var c=a.length;while(c--)if(r=a[c]==t){l=f[c];break}if(!r){var h;if(u){s=u(l,t);if(h=typeof s!="undefined")l=s}h||(l=i?_t(l)?l:[]:sn(l)?l:{}),a.push(t),f.push(l),h||(l=fn(l,t,o,u,a,f))}}else u&&(s=u(l,t),typeof s=="undefined"&&(s=t)),typeof s!="undefined"&&(l=s);e[n]=l});return e}function ln(e,t,n){var r=typeof t=="function",i={};if(r)t=yt.createCallback(t,n);else var s=G.apply(X,dt.call(arguments,1));return Ut(e,function(e,n,o){if(r?!t(e,n,o):Rn(s,n)<0)i[n]=e}),i}function cn(e){var t=-1,n=Pt(e),r=n.length,s=i(r);while(++t<r){var o=n[t];s[t]=[o,e[o]]}return s}function hn(e,t,n){var r={};if(typeof t!="function"){var i=-1,s=G.apply(X,dt.call(arguments,1)),o=en(e)?s.length:0;while(++i<o){var u=s[i];u in e&&(r[u]=e[u])}}else t=yt.createCallback(t,n),Ut(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r}function pn(e){var t=-1,n=Pt(e),r=n.length,s=i(r);while(++t<r)s[t]=e[n[t]];return s}function dn(e){var t=-1,n=G.apply(X,dt.call(arguments,1)),r=n.length,s=i(r);while(++t<r)s[t]=e[n[t]];return s}function vn(e,t,n){var r=-1,i=e?e.length:0,s=!1;return n=(n<0?lt(0,i+n):n)||0,typeof i=="number"?s=(un(e)?e.indexOf(t,n):Rn(e,t,n))>-1:zt(e,function(e){if(++r>=n)return!(s=e===t)}),s}function mn(e,t,n){var r={};return t=yt.createCallback(t,n),wn(e,function(e,n,i){n=z(t(e,n,i)),et.call(r,n)?r[n]++:r[n]=1}),r}function gn(e,t,n){var r=!0;t=yt.createCallback(t,n);var i=-1,s=e?e.length:0;if(typeof s=="number"){while(++i<s)if(!(r=!!t(e[i],i,e)))break}else zt(e,function(e,n,i){return r=!!t(e,n,i)});return r}function yn(e,t,n){var r=[];t=yt.createCallback(t,n);var i=-1,s=e?e.length:0;if(typeof s=="number")while(++i<s){var o=e[i];t(o,i,e)&&r.push(o)}else zt(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function bn(e,t,n){t=yt.createCallback(t,n);var r=-1,i=e?e.length:0;if(typeof i!="number"){var o;return zt(e,function(e,n,r){if(t(e,n,r))return o=e,!1}),o}while(++r<i){var s=e[r];if(t(s,r,e))return s}}function wn(e,t,n){var r=-1,i=e?e.length:0;t=t&&typeof n=="undefined"?t:yt.createCallback(t,n);if(typeof i=="number"){while(++r<i)if(t(e[r],r,e)===!1)break}else zt(e,t);return e}function En(e,t,n){var r={};return t=yt.createCallback(t,n),wn(e,function(e,n,i){n=z(t(e,n,i)),(et.call(r,n)?r[n]:r[n]=[]).push(e)}),r}function Sn(e,t){var n=dt.call(arguments,2),r=-1,s=typeof t=="function",o=e?e.length:0,u=i(typeof o=="number"?o:0);return wn(e,function(e){u[++r]=(s?t:e[t]).apply(e,n)}),u}function xn(e,t,n){var r=-1,s=e?e.length:0;t=yt.createCallback(t,n);if(typeof s=="number"){var o=i(s);while(++r<s)o[r]=t(e[r],r,e)}else o=[],zt(e,function(e,n,i){o[++r]=t(e,n,i)});return o}function Tn(e,t,n){var r=-Infinity,i=r;if(!t&&_t(e)){var s=-1,o=e.length;while(++s<o){var u=e[s];u>i&&(i=u)}}else t=!t&&un(e)?Et:yt.createCallback(t,n),wn(e,function(e,n,s){var o=t(e,n,s);o>r&&(r=o,i=e)});return i}function Nn(e,t,n){var r=Infinity,i=r;if(!t&&_t(e)){var s=-1,o=e.length;while(++s<o){var u=e[s];u<i&&(i=u)}}else t=!t&&un(e)?Et:yt.createCallback(t,n),wn(e,function(e,n,s){var o=t(e,n,s);o<r&&(r=o,i=e)});return i}function Cn(e,t){var n=-1,r=e?e.length:0;if(typeof r=="number"){var s=i(r);while(++n<r)s[n]=e[n][t]}return s||xn(e,t)}function kn(e,t,n,r){if(!e)return n;var i=arguments.length<3;t=yt.createCallback(t,r,4);var s=-1,o=e.length;if(typeof o=="number"){i&&(n=e[++s]);while(++s<o)n=t(n,e[s],s,e)}else zt(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function Ln(e,t,n,r){var i=e,s=e?e.length:0,o=arguments.length<3;if(typeof s!="number"){var u=Pt(e);s=u.length}return t=yt.createCallback(t,r,4),wn(e,function(e,r,a){r=u?u[--s]:--s,n=o?(o=!1,i[r]):t(n,i[r],r,a)}),n}function An(e,t,n){return t=yt.createCallback(t,n),yn(e,function(e,n,r){return!t(e,n,r)})}function On(e){var t=-1,n=e?e.length:0,r=i(typeof n=="number"?n:0);return wn(e,function(e){var n=Y(pt()*(++t+1));r[t]=r[n],r[n]=e}),r}function Mn(e){var t=e?e.length:0;return typeof t=="number"?t:Pt(e).length}function _n(e,t,n){var r;t=yt.createCallback(t,n);var i=-1,s=e?e.length:0;if(typeof s=="number"){while(++i<s)if(r=t(e[i],i,e))break}else zt(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function Dn(e,t,n){var r=-1,s=e?e.length:0,o=i(typeof s=="number"?s:0);t=yt.createCallback(t,n),wn(e,function(e,n,i){o[++r]={criteria:t(e,n,i),index:r,value:e}}),s=o.length,o.sort(St);while(s--)o[s]=o[s].value;return o}function Pn(e){return e&&typeof e.length=="number"?At(e):pn(e)}function Bn(e){var t=-1,n=e?e.length:0,r=[];while(++t<n){var i=e[t];i&&r.push(i)}return r}function jn(e){var t=-1,n=e?e.length:0,r=G.apply(X,dt.call(arguments,1)),i=wt(r),s=[];while(++t<n){var o=e[t];i(o)||s.push(o)}return s}function Fn(e,t,n){var r=-1,i=e?e.length:0;t=yt.createCallback(t,n);while(++r<i)if(t(e[r],r,e))return r;return-1}function In(e,t,n){if(e){var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=-1;t=yt.createCallback(t,n);while(++s<i&&t(e[s],s,e))r++}else{r=t;if(r==null||n)return e[0]}return At(e,0,ct(lt(0,r),i))}}function qn(e,t,n,r){var i=-1,s=e?e.length:0,o=[];typeof t!="boolean"&&t!=null&&(r=n,n=t,t=!1),n!=null&&(n=yt.createCallback(n,r));while(++i<s){var u=e[i];n&&(u=n(u,i,e)),_t(u)?tt.apply(o,t?u:qn(u)):o.push(u)}return o}function Rn(e,t,n){var r=-1,i=e?e.length:0;if(typeof n=="number")r=(n<0?lt(0,i+n):n||0)-1;else if(n)return r=Jn(e,t),e[r]===t?r:-1;while(++r<i)if(e[r]===t)return r;return-1}function Un(e,t,n){if(!e)return[];var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=i;t=yt.createCallback(t,n);while(s--&&t(e[s],s,e))r++}else r=t==null||n?1:t||r;return At(e,0,ct(lt(0,i-r),i))}function zn(e){var t=arguments,n=t.length,r={0:{}},i=-1,s=e?e.length:0,o=s>=a,f=[],l=f;e:while(++i<s){var c=e[i];if(o)var h=u+c,p=r[0][h]?!(l=r[0][h]):l=r[0][h]=[];if(p||Rn(l,c)<0){o&&l.push(c);var d=n;while(--d)if(!(r[d]||(r[d]=wt(t[d])))(c))continue e;f.push(c)}}return f}function Wn(e,t,n){if(e){var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=i;t=yt.createCallback(t,n);while(s--&&t(e[s],s,e))r++}else{r=t;if(r==null||n)return e[i-1]}return At(e,lt(0,i-r))}}function Xn(e,t,n){var r=e?e.length:0;typeof n=="number"&&(r=(n<0?lt(0,r+n):ct(n,r-1))+1);while(r--)if(e[r]===t)return r;return-1}function Vn(e,t,n){e=+e||0,n=+n||1,t==null&&(t=e,e=0);var r=-1,s=lt(0,K((t-e)/n)),o=i(s);while(++r<s)o[r]=e,e+=n;return o}function $n(e,t,n){if(typeof t!="number"&&t!=null){var r=0,i=-1,s=e?e.length:0;t=yt.createCallback(t,n);while(++i<s&&t(e[i],i,e))r++}else r=t==null||n?1:lt(0,t);return At(e,r)}function Jn(e,t,n,r){var i=0,s=e?e.length:i;n=n?yt.createCallback(n,r,1):gr,t=n(t);while(i<s){var o=i+s>>>1;n(e[o])<t?i=o+1:s=o}return i}function Kn(e){return _t(e)||(arguments[0]=e?dt.call(e):X),Qn(G.apply(X,arguments))}function Qn(e,t,n,r){var i=-1,s=e?e.length:0,o=[],f=o;typeof t!="boolean"&&t!=null&&(r=n,n=t,t=!1);var l=!t&&s>=a;if(l)var c={};n!=null&&(f=[],n=yt.createCallback(n,r));while(++i<s){var h=e[i],p=n?n(h,i,e):h;if(l)var d=u+p,v=c[d]?!(f=c[d]):f=c[d]=[];if(t?!i||f[f.length-1]!==p:v||Rn(f,p)<0)(n||l)&&f.push(p),o.push(h)}return o}function Gn(e){var t=-1,n=e?e.length:0,r=n?Tn(Cn(e,"length")):0,s=i(r);while(++t<n){var o=-1,u=e[t];while(++o<r)(s[o]||(s[o]=i(n)))[t]=u[o]}return s}function Yn(e){return jn(e,dt.call(arguments,1))}function Zn(e){var t=-1,n=e?Tn(Cn(arguments,"length")):0,r=i(n);while(++t<n)r[t]=Cn(arguments,t);return r}function er(e,t){var n=-1,r=e?e.length:0,i={};while(++n<r){var s=e[n];t?i[s]=t[n]:i[s[0]]=s[1]}return i}function tr(e,t){return e<1?t():function(){if(--e<1)return t.apply(this,arguments)}}function nr(e,t){return bt.fastBind||st&&arguments.length>2?st.call.apply(st,arguments):xt(e,t,dt.call(arguments,2))}function rr(e){var t=arguments.length>1?G.apply(X,dt.call(arguments,1)):Wt(e),n=-1,r=t.length;while(++n<r){var i=t[n];e[i]=nr(e[i],e)}return e}function ir(e,t){return xt(e,t,dt.call(arguments,2),o)}function sr(){var e=arguments;return function(){var t=arguments,n=e.length;while(n--)t=[e[n].apply(this,t)];return t[0]}}function or(e,t,n){if(e==null)return gr;var r=typeof e;if(r!="function"){if(r!="object")return function(t){return t[e]};var i=Pt(e);return function(t){var n=i.length,r=!1;while(n--)if(!(r=Gt(t[i[n]],e[i[n]],o)))break;return r}}return typeof t!="undefined"?n===1?function(n){return e.call(t,n)}:n===2?function(n,r){return e.call(t,n,r)}:n===4?function(n,r,i,s){return e.call(t,n,r,i,s)}:function(n,r,i){return e.call(t,n,r,i)}:e}function ur(e,t,n){function f(){i=u=null,a&&(s=e.apply(o,r))}var r,i,s,o,u,a=!0;if(n===!0){var l=!0;a=!1}else n&&D[typeof n]&&(l=n.leading,a="trailing"in n?n.trailing:a);return function(){return r=arguments,o=this,Q(u),!i&&l?(i=!0,s=e.apply(o,r)):u=rt(f,t),s}}function ar(e){var n=dt.call(arguments,1);return rt(function(){e.apply(t,n)},1)}function fr(e,n){var r=dt.call(arguments,2);return rt(function(){e.apply(t,r)},n)}function lr(e,t){var n={};return function(){var r=u+(t?t.apply(this,arguments):arguments[0]);return et.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}}function cr(e){var t,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function hr(e){return xt(e,dt.call(arguments,1))}function pr(e){return xt(e,dt.call(arguments,1),null,o)}function dr(e,t,n){function l(){o=null,f&&(u=new j,i=e.apply(s,r))}var r,i,s,o,u=0,a=!0,f=!0;return n===!1?a=!1:n&&D[typeof n]&&(a="leading"in n?n.leading:a,f="trailing"in n?n.trailing:f),function(){var n=new j;!o&&!a&&(u=n);var f=t-(n-u);return r=arguments,s=this,f<=0?(Q(o),o=null,u=n,i=e.apply(s,r)):o||(o=rt(l,f)),i}}function vr(e,t){return function(){var n=[e];return tt.apply(n,arguments),t.apply(this,n)}}function mr(e){return e==null?"":z(e).replace(b,Nt)}function gr(e){return e}function yr(e){wn(Wt(e),function(t){var n=yt[t]=e[t];yt.prototype[t]=function(){var e=this.__wrapped__,t=[e];tt.apply(t,arguments);var r=n.apply(yt,t);return e&&typeof e=="object"&&e==r?this:new Ct(r)}})}function br(){return n._=$,this}function Er(e,t){return e==null&&t==null&&(t=1),e=+e||0,t==null&&(t=e,e=0),e+Y(pt()*((+t||0)-e+1))}function Sr(e,n){var r=e?e[n]:t;return Zt(r)?e[n]():r}function xr(e,n,r){var i=yt.templateSettings;e||(e=""),r=qt({},r,i);var s=qt({},r.imports,i.imports),o=Pt(s),u=pn(s),a,h=0,d=r.interpolate||y,m="__p += '",g=U((r.escape||y).source+"|"+d.source+"|"+(d===v?p:y).source+"|"+(r.evaluate||y).source+"|$","g");e.replace(g,function(t,n,r,i,s,o){return r||(r=i),m+=e.slice(h,o).replace(w,Tt),n&&(m+="' +\n__e("+n+") +\n'"),s&&(a=!0,m+="';\n"+s+";\n__p += '"),r&&(m+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=o+t.length,t}),m+="';\n";var b=r.variable,E=b;E||(b="obj",m="with ("+b+") {\n"+m+"\n}\n"),m=(a?m.replace(f,""):m).replace(l,"$1").replace(c,"$1;"),m="function("+b+") {\n"+(E?"":b+" || ("+b+" = {});\n")+"var __t, __p = '', __e = _.escape"+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var x="\n/*\n//@ sourceURL="+(r.sourceURL||"/lodash/template/source["+S++ +"]")+"\n*/";try{var T=F(o,"return "+m+x).apply(t,u)}catch(N){throw N.source=m,N}return n?T(n):(T.source=m,T)}function Tr(e,t,n){e=(e=+e)>-1?e:0;var r=-1,s=i(e);t=yt.createCallback(t,n,1);while(++r<e)s[r]=t(r);return s}function Nr(e){return e==null?"":z(e).replace(h,Ot)}function Cr(e){var t=++s;return z(e==null?"":e)+t}function kr(e,t){return t(e),e}function Lr(){return z(this.__wrapped__)}function Ar(){return this.__wrapped__}n=n?B.defaults(e.Object(),n,B.pick(e,E)):e;var i=n.Array,k=n.Boolean,j=n.Date,F=n.Function,I=n.Math,q=n.Number,R=n.Object,U=n.RegExp,z=n.String,W=n.TypeError,X=i(),V=R(),$=n._,J=U("^"+z(V.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),K=I.ceil,Q=n.clearTimeout,G=X.concat,Y=I.floor,Z=J.test(Z=R.getPrototypeOf)&&Z,et=V.hasOwnProperty,tt=X.push,nt=n.setImmediate,rt=n.setTimeout,it=V.toString,st=J.test(st=it.bind)&&st,ot=J.test(ot=i.isArray)&&ot,ut=n.isFinite,at=n.isNaN,ft=J.test(ft=R.keys)&&ft,lt=I.max,ct=I.min,ht=n.parseInt,pt=I.random,dt=X.slice,vt=J.test(n.attachEvent),mt=st&&!/\n|true/.test(st+vt),gt={};gt[T]=i,gt[N]=k,gt[C]=j,gt[A]=R,gt[L]=q,gt[O]=U,gt[M]=z;var bt=yt.support={};bt.fastBind=st&&!mt,yt.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:v,variable:"",imports:{_:yt}},Ct.prototype=yt.prototype;var _t=ot,Dt=function(e){var t,n=e,r=[];if(!n)return r;if(!D[typeof e])return r;for(t in n)et.call(n,t)&&r.push(t);return r},Pt=ft?function(e){return en(e)?ft(e):[]}:Dt,Ht={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bt=Vt(Ht),jt=function(e,t,n){var r,i=e,s=i;if(!i)return s;var o=arguments,u=0,a=typeof n=="number"?2:o.length;if(a>3&&typeof o[a-2]=="function")var f=yt.createCallback(o[--a-1],o[a--],2);else a>2&&typeof o[a-1]=="function"&&(f=o[--a]);while(++u<a){i=o[u];if(i&&D[typeof i]){var l=i.length;r=-1;if(_t(i))while(++r<l)s[r]=f?f(s[r],i[r]):i[r];else{var c=-1,h=D[typeof i]?Pt(i):[],l=h.length;while(++c<l)r=h[c],s[r]=f?f(s[r],i[r]):i[r]}}}return s},qt=function(e,t,n){var r,i=e,s=i;if(!i)return s;var o=arguments,u=0,a=typeof n=="number"?2:o.length;while(++u<a){i=o[u];if(i&&D[typeof i]){var f=i.length;r=-1;if(_t(i))while(++r<f)typeof s[r]=="undefined"&&(s[r]=i[r]);else{var l=-1,c=D[typeof i]?Pt(i):[],f=c.length;while(++l<f)r=c[l],typeof s[r]=="undefined"&&(s[r]=i[r])}}}return s},Ut=function(e,t,n){var r,i=e,s=i;if(!i)return s;if(!D[typeof i])return s;t=t&&typeof n=="undefined"?t:yt.createCallback(t,n);for(r in i)if(t(i[r],r,e)===!1)return s;return s},zt=function(e,t,n){var r,i=e,s=i;if(!i)return s;if(!D[typeof i])return s;t=t&&typeof n=="undefined"?t:yt.createCallback(t,n);var o=-1,u=D[typeof i]?Pt(i):[],a=u.length;while(++o<a){r=u[o];if(t(i[r],r,e)===!1)return s}return s},sn=function(e){if(!e||it.call(e)!=A)return!1;var t=e.valueOf,n=typeof t=="function"&&(n=Z(t))&&Z(n);return n?e==n||Z(e)==n:Lt(e)},Hn=yn;mt&&r&&typeof nt=="function"&&(ar=nr(nt,n));var wr=ht(m+"08")==8?ht:function(e,t){return ht(un(e)?e.replace(g,""):e,t||0)};return yt.after=tr,yt.assign=jt,yt.at=dn,yt.bind=nr,yt.bindAll=rr,yt.bindKey=ir,yt.compact=Bn,yt.compose=sr,yt.countBy=mn,yt.createCallback=or,yt.debounce=ur,yt.defaults=qt,yt.defer=ar,yt.delay=fr,yt.difference=jn,yt.filter=yn,yt.flatten=qn,yt.forEach=wn,yt.forIn=Ut,yt.forOwn=zt,yt.functions=Wt,yt.groupBy=En,yt.initial=Un,yt.intersection=zn,yt.invert=Vt,yt.invoke=Sn,yt.keys=Pt,yt.map=xn,yt.max=Tn,yt.memoize=lr,yt.merge=fn,yt.min=Nn,yt.omit=ln,yt.once=cr,yt.pairs=cn,yt.partial=hr,yt.partialRight=pr,yt.pick=hn,yt.pluck=Cn,yt.range=Vn,yt.reject=An,yt.rest=$n,yt.shuffle=On,yt.sortBy=Dn,yt.tap=kr,yt.throttle=dr,yt.times=Tr,yt.toArray=Pn,yt.union=Kn,yt.uniq=Qn,yt.unzip=Gn,yt.values=pn,yt.where=Hn,yt.without=Yn,yt.wrap=vr,yt.zip=Zn,yt.zipObject=er,yt.collect=xn,yt.drop=$n,yt.each=wn,yt.extend=jt,yt.methods=Wt,yt.object=er,yt.select=yn,yt.tail=$n,yt.unique=Qn,yr(yt),yt.clone=Ft,yt.cloneDeep=It,yt.contains=vn,yt.escape=mr,yt.every=gn,yt.find=bn,yt.findIndex=Fn,yt.findKey=Rt,yt.has=Xt,yt.identity=gr,yt.indexOf=Rn,yt.isArguments=Mt,yt.isArray=_t,yt.isBoolean=$t,yt.isDate=Jt,yt.isElement=Kt,yt.isEmpty=Qt,yt.isEqual=Gt,yt.isFinite=Yt,yt.isFunction=Zt,yt.isNaN=tn,yt.isNull=nn,yt.isNumber=rn,yt.isObject=en,yt.isPlainObject=sn,yt.isRegExp=on,yt.isString=un,yt.isUndefined=an,yt.lastIndexOf=Xn,yt.mixin=yr,yt.noConflict=br,yt.parseInt=wr,yt.random=Er,yt.reduce=kn,yt.reduceRight=Ln,yt.result=Sr,yt.runInContext=H,yt.size=Mn,yt.some=_n,yt.sortedIndex=Jn,yt.template=xr,yt.unescape=Nr,yt.uniqueId=Cr,yt.all=gn,yt.any=_n,yt.detect=bn,yt.foldl=kn,yt.foldr=Ln,yt.include=vn,yt.inject=kn,zt(yt,function(e,t){yt.prototype[t]||(yt.prototype[t]=function(){var t=[this.__wrapped__];return tt.apply(t,arguments),e.apply(yt,t)})}),yt.first=In,yt.last=Wn,yt.take=In,yt.head=In,zt(yt,function(e,t){yt.prototype[t]||(yt.prototype[t]=function(t,n){var r=e(this.__wrapped__,t,n);return t==null||n&&typeof t!="function"?r:new Ct(r)})}),yt.VERSION="1.2.1",yt.prototype.toString=Lr,yt.prototype.value=Ar,yt.prototype.valueOf=Ar,wn(["join","pop","shift"],function(e){var t=X[e];yt.prototype[e]=function(){return t.apply(this.__wrapped__,arguments)}}),wn(["push","reverse","sort","unshift"],function(e){var t=X[e];yt.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),wn(["concat","slice","splice"],function(e){var t=X[e];yt.prototype[e]=function(){return new Ct(t.apply(this.__wrapped__,arguments))}}),yt}var t,n=typeof exports=="object"&&exports,r=typeof module=="object"&&module&&module.exports==n&&module,i=typeof global=="object"&&global;if(i.global===i||i.window===i)e=i;var s=0,o={},u=+(new Date)+"",a=200,f=/\b__p \+= '';/g,l=/\b(__p \+=) '' \+/g,c=/(__e\(.*?\)|\b__t\)) \+\n'';/g,h=/&(?:amp|lt|gt|quot|#39);/g,p=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,d=/\w*$/,v=/<%=([\s\S]+?)%>/g,m=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",g=RegExp("^["+m+"]*0+(?=.$)"),y=/($^)/,b=/[&<>"']/g,w=/['\n\r\t\u2028\u2029\\]/g,E=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],S=0,x="[object Arguments]",T="[object Array]",N="[object Boolean]",C="[object Date]",k="[object Function]",L="[object Number]",A="[object Object]",O="[object RegExp]",M="[object String]",_={};_[k]=!1,_[x]=_[T]=_[N]=_[C]=_[L]=_[A]=_[O]=_[M]=!0;var D={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},P={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},B=H();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(e._=B,define("lib/lodash",[],function(){return B})):n&&!n.nodeType?r?(r.exports=B)._=B:n._=B:e._=B}(this),function(e,t,n){typeof module!="undefined"&&module.exports?module.exports=n():typeof define=="function"&&define.amd?define("lib/bonzo",n):t[e]=n()}("bonzo",this,function(){function D(e){return e&&e.nodeName&&(e.nodeType==1||e.nodeType==11)}function P(e,t,n){var r,i,s;if(typeof e=="string")return et.create(e);D(e)&&(e=[e]);if(n){s=[];for(r=0,i=e.length;r<i;r++)s[r]=Q(t,e[r]);return s}return e}function H(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function B(e,t,n,r){var i,s=0,o=e.length;for(;s<o;s++)i=r?e.length-s-1:s,t.call(n||e[i],e[i],i,e);return e}function j(e,t,n){for(var r=0,i=e.length;r<i;r++)D(e[r])&&(j(e[r].childNodes,t,n),t.call(n||e[r],e[r],r,e));return e}function F(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function I(e){return e?e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase():e}function q(e){e[x]("data-node-uid")||e[S]("data-node-uid",++y);var t=e[x]("data-node-uid");return g[t]||(g[t]={})}function R(e){var t=e[x]("data-node-uid");t&&delete g[t]}function U(e){var t;try{return e===null||e===undefined?undefined:e==="true"?!0:e==="false"?!1:e==="null"?null:(t=parseFloat(e))==e?t:e}catch(n){}return undefined}function z(e,t,n){for(var r=0,i=e.length;r<i;++r)if(t.call(n||null,e[r],r,e))return!0;return!1}function W(e){return e=="transform"&&(e=N.transform)||/^transform-?[Oo]rigin$/.test(e)&&(e=N.transform+"Origin")||e=="float"&&(e=N.cssFloat),e?F(e):null}function X(e,t,n,r){var i=0,s=t||this,o=[],u=O&&typeof e=="string"&&e.charAt(0)!="<"?O(e):e;return B(P(u),function(e,t){B(s,function(r){n(e,o[i++]=t>0?Q(s,r):r)},null,r)},this,r),s.length=i,B(o,function(e){s[--i]=e},null,!r),s}function V(e,t,n){var r=et(e),i=r.css("position"),s=r.offset(),o="relative",u=i==o,a=[parseInt(r.css("left"),10),parseInt(r.css("top"),10)];i=="static"&&(r.css("position",o),i=o),isNaN(a[0])&&(a[0]=u?0:e.offsetLeft),isNaN(a[1])&&(a[1]=u?0:e.offsetTop),t!=null&&(e.style.left=t-s.left+a[0]+E),n!=null&&(e.style.top=n-s.top+a[1]+E)}function $(e,t){return typeof t=="function"?t(e):t}function J(t,n,r){var i=this[0];return i?t==null&&n==null?(G(i)?Y():{x:i.scrollLeft,y:i.scrollTop})[r]:(G(i)?e.scrollTo(t,n):(t!=null&&(i.scrollLeft=t),n!=null&&(i.scrollTop=n)),this):this}function K(e){this.length=0;if(e){e=typeof e!="string"&&!e.nodeType&&typeof e.length!="undefined"?e:[e],this.length=e.length;for(var t=0;t<e.length;t++)this[t]=e[t]}}function Q(e,t){var n=t.cloneNode(!0),r,i,s;if(e.$&&typeof e.cloneEvents=="function"){e.$(n).cloneEvents(t),r=e.$(n).find("*"),i=e.$(t).find("*");for(s=0;s<i.length;s++)e.$(r[s]).cloneEvents(i[s])}return n}function G(t){return t===e||/^(?:body|html)$/i.test(t.tagName)}function Y(){return{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop}}function Z(e){var t=document.createElement("script"),n=e.match(o);return t.src=n[1],t}function et(e){return new K(e)}var e=window,t=e.document,n=t.documentElement,r="parentNode",i=/^(checked|value|selected|disabled)$/i,s=/^(select|fieldset|table|tbody|tfoot|td|tr|colgroup)$/i,o=/\s*<script +src=['"]([^'"]+)['"]>/,u=["<table>","</table>",1],a=["<table><tbody><tr>","</tr></tbody></table>",3],f=["<select>","</select>",1],l=["_","",0,1],c={thead:u,tbody:u,tfoot:u,colgroup:u,caption:u,tr:["<table><tbody>","</tbody></table>",2],th:a,td:a,col:["<table><colgroup>","</colgroup></table>",2],fieldset:["<form>","</form>",1],legend:["<form><fieldset>","</fieldset></form>",2],option:f,optgroup:f,script:l,style:l,link:l,param:l,base:l},h=/^(checked|selected|disabled)$/,p=/msie/i.test(navigator.userAgent),d,v,m,g={},y=0,b=/^-?[\d\.]+$/,w=/^data-(.+)$/,E="px",S="setAttribute",x="getAttribute",T="getElementsByTagName",N=function(){var e=t.createElement("p");return e.innerHTML='<a href="#x">x</a><table style="float:left;"></table>',{hrefExtended:e[T]("a")[0][x]("href")!="#x",autoTbody:e[T]("tbody").length!==0,computedStyle:t.defaultView&&t.defaultView.getComputedStyle,cssFloat:e[T]("table")[0].style.styleFloat?"styleFloat":"cssFloat",transform:function(){var t=["transform","webkitTransform","MozTransform","OTransform","msTransform"],n;for(n=0;n<t.length;n++)if(t[n]in e.style)return t[n]}(),classList:"classList"in e,opasity:function(){return typeof t.createElement("a").style.opacity!="undefined"}()}}(),C=/(^\s*|\s*$)/g,k=/\s+/,L=String.prototype.toString,A={lineHeight:1,zoom:1,zIndex:1,opacity:1,boxFlex:1,WebkitBoxFlex:1,MozBoxFlex:1},O=t.querySelectorAll&&function(e){return t.querySelectorAll(e)},M=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(C,"")},_=N.computedStyle?function(e,n){var r=null,i=t.defaultView.getComputedStyle(e,"");return i&&(r=i[n]),e.style[n]||r}:!p||!n.currentStyle?function(e,t){return e.style[t]}:function(e,t){var n,r;if(t=="opacity"&&!N.opasity){n=100;try{n=e.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(i){try{n=e.filters("alpha").opacity}catch(s){}}return n/100}return r=e.currentStyle?e.currentStyle[t]:null,e.style[t]||r};return N.classList?(d=function(e,t){return e.classList.contains(t)},v=function(e,t){e.classList.add(t)},m=function(e,t){e.classList.remove(t)}):(d=function(e,t){return H(t).test(e.className)},v=function(e,t){e.className=M(e.className+" "+t)},m=function(e,t){e.className=M(e.className.replace(H(t)," "))}),K.prototype={get:function(e){return this[e]||null},each:function(e,t){return B(this,e,t)},deepEach:function(e,t){return j(this,e,t)},map:function(e,t){var n=[],r,i;for(i=0;i<this.length;i++)r=e.call(this,this[i],i),t?t(r)&&n.push(r):n.push(r);return n},html:function(e,t){var r=t?n.textContent===undefined?"innerText":"textContent":"innerHTML",i=this,o=function(t,n){B(P(e,i,n),function(e){t.appendChild(e)})},u=function(n,i){try{if(t||typeof e=="string"&&!s.test(n.tagName))return n[r]=e}catch(u){}o(n,i)};return typeof e!="undefined"?this.empty().each(u):this[0]?this[0][r]:""},text:function(e){return this.html(e,!0)},append:function(e){var t=this;return this.each(function(n,r){B(P(e,t,r),function(e){n.appendChild(e)})})},prepend:function(e){var t=this;return this.each(function(n,r){var i=n.firstChild;B(P(e,t,r),function(e){n.insertBefore(e,i)})})},appendTo:function(e,t){return X.call(this,e,t,function(e,t){e.appendChild(t)})},prependTo:function(e,t){return X.call(this,e,t,function(e,t){e.insertBefore(t,e.firstChild)},1)},before:function(e){var t=this;return this.each(function(n,i){B(P(e,t,i),function(e){n[r].insertBefore(e,n)})})},after:function(e){var t=this;return this.each(function(n,i){B(P(e,t,i),function(e){n[r].insertBefore(e,n.nextSibling)},null,1)})},insertBefore:function(e,t){return X.call(this,e,t,function(e,t){e[r].insertBefore(t,e)})},insertAfter:function(e,t){return X.call(this,e,t,function(e,t){var n=e.nextSibling;n?e[r].insertBefore(t,n):e[r].appendChild(t)},1)},replaceWith:function(e){return et(P(e)).insertAfter(this),this.remove()},clone:function(e){var t=[],n,r;for(r=0,n=this.length;r<n;r++)t[r]=Q(e||this,this[r]);return et(t)},addClass:function(e){return e=L.call(e).split(k),this.each(function(t){B(e,function(e){e&&!d(t,$(t,e))&&v(t,$(t,e))})})},removeClass:function(e){return e=L.call(e).split(k),this.each(function(t){B(e,function(e){e&&d(t,$(t,e))&&m(t,$(t,e))})})},hasClass:function(e){return e=L.call(e).split(k),z(this,function(t){return z(e,function(e){return e&&d(t,e)})})},toggleClass:function(e,t){return e=L.call(e).split(k),this.each(function(n){B(e,function(e){e&&(typeof t!="undefined"?t?!d(n,e)&&v(n,e):m(n,e):d(n,e)?m(n,e):v(n,e))})})},show:function(e){return e=typeof e=="string"?e:"",this.each(function(t){t.style.display=e})},hide:function(){return this.each(function(e){e.style.display="none"})},toggle:function(e,t){return t=typeof t=="string"?t:"",typeof e!="function"&&(e=null),this.each(function(n){n.style.display=n.offsetWidth||n.offsetHeight?"none":t,e&&e.call(n)})},first:function(){return et(this.length?this[0]:[])},last:function(){return et(this.length?this[this.length-1]:[])},next:function(){return this.related("nextSibling")},previous:function(){return this.related("previousSibling")},parent:function(){return this.related(r)},related:function(e){return et(this.map(function(t){t=t[e];while(t&&t.nodeType!==1)t=t[e];return t||0},function(e){return e}))},focus:function(){return this.length&&this[0].focus(),this},blur:function(){return this.length&&this[0].blur(),this},css:function(n,r){function o(e,t,n){for(var r in s)if(s.hasOwnProperty(r)){n=s[r],(t=W(r))&&b.test(n)&&!(t in A)&&(n+=E);try{e.style[t]=$(e,n)}catch(i){}}}var i,s=n;return r===undefined&&typeof n=="string"?(r=this[0],r?r===t||r===e?(i=r===t?et.doc():et.viewport(),n=="width"?i.width:n=="height"?i.height:""):(n=W(n))?_(r,n):null:null):(typeof n=="string"&&(s={},s[n]=r),p&&s.opacity&&(s.filter="alpha(opacity="+s.opacity*100+")",s.zoom=n.zoom||1,delete s.opacity),this.each(o))},offset:function(e,n){if(!e||typeof e!="object"||typeof e.top!="number"&&typeof e.left!="number"){if(typeof e=="number"||typeof n=="number")return this.each(function(t){V(t,e,n)});if(!this[0])return{top:0,left:0,height:0,width:0};var r=this[0],i=r.ownerDocument.documentElement,s=r.getBoundingClientRect(),o=Y(),u=r.offsetWidth,a=r.offsetHeight,f=s.top+o.y-Math.max(0,i&&i.clientTop,t.body.clientTop),l=s.left+o.x-Math.max(0,i&&i.clientLeft,t.body.clientLeft);return{top:f,left:l,height:a,width:u}}return this.each(function(t){V(t,e.left,e.top)})},dim:function(){if(!this.length)return{height:0,width:0};var e=this[0],t=e.nodeType==9&&e.documentElement,n=!t&&!!e.style&&!e.offsetWidth&&!e.offsetHeight?function(t){var n={position:e.style.position||"",visibility:e.style.visibility||"",display:e.style.display||""};return t.first().css({position:"absolute",visibility:"hidden",display:"block"}),n}(this):null,r=t?Math.max(e.body.scrollWidth,e.body.offsetWidth,t.scrollWidth,t.offsetWidth,t.clientWidth):e.offsetWidth,i=t?Math.max(e.body.scrollHeight,e.body.offsetHeight,t.scrollHeight,t.offsetHeight,t.clientHeight):e.offsetHeight;return n&&this.first().css(n),{height:i,width:r}},attr:function(e,t){var n=this[0],r;if(typeof e=="string"||e instanceof String)return typeof t=="undefined"?n?i.test(e)?h.test(e)&&typeof n[e]=="string"?!0:n[e]:e!="href"&&e!="src"||!N.hrefExtended?n[x](e):n[x](e,2):null:this.each(function(n){i.test(e)?n[e]=$(n,t):n[S](e,$(n,t))});for(r in e)e.hasOwnProperty(r)&&this.attr(r,e[r]);return this},removeAttr:function(e){return this.each(function(t){h.test(e)?t[e]=!1:t.removeAttribute(e)})},val:function(e){return typeof e=="string"?this.attr("value",e):this.length?this[0].value:null},data:function(e,t){var n=this[0],r,i;return typeof t=="undefined"?n?(r=q(n),typeof e=="undefined"?(B(n.attributes,function(e){(i=(""+e.name).match(w))&&(r[F(i[1])]=U(e.value))}),r):(typeof r[e]=="undefined"&&(r[e]=U(this.attr("data-"+I(e)))),r[e])):null:this.each(function(n){q(n)[e]=t})},remove:function(){return this.deepEach(R),this.detach()},empty:function(){return this.each(function(e){j(e.childNodes,R);while(e.firstChild)e.removeChild(e.firstChild)})},detach:function(){return this.each(function(e){e[r]&&e[r].removeChild(e)})},scrollTop:function(e){return J.call(this,null,e,"y")},scrollLeft:function(e){return J.call(this,e,null,"x")}},et.setQueryEngine=function(e){O=e,delete et.setQueryEngine},et.aug=function(e,t){for(var n in e)e.hasOwnProperty(n)&&((t||K.prototype)[n]=e[n])},et.create=function(e){return typeof e=="string"&&e!==""?function(){if(o.test(e))return[Z(e)];var n=e.match(/^\s*<([^\s>]+)/),i=t.createElement("div"),s=[],u=n?c[n[1].toLowerCase()]:null,a=u?u[2]+1:1,f=u&&u[3],l=r,h=N.autoTbody&&u&&u[0]=="<table>"&&!/<tbody/i.test(e);i.innerHTML=u?u[0]+e+u[1]:e;while(a--)i=i.firstChild;f&&i&&i.nodeType!==1&&(i=i.nextSibling);do(!n||i.nodeType==1)&&(!h||i.tagName&&i.tagName!="TBODY")&&s.push(i);while(i=i.nextSibling);return B(s,function(e){e[l]&&e[l].removeChild(e)}),s}():D(e)?[e.cloneNode(!0)]:[]},et.doc=function(){var e=et.viewport();return{width:Math.max(t.body.scrollWidth,n.scrollWidth,e.width),height:Math.max(t.body.scrollHeight,n.scrollHeight,e.height)}},et.firstChild=function(e){for(var t=e.childNodes,n=0,r=t&&t.length||0,i;n<r;n++)t[n].nodeType===1&&(i=t[r=n]);return i},et.viewport=function(){return{width:p?n.clientWidth:self.innerWidth,height:p?n.clientHeight:self.innerHeight}},et.isAncestor="compareDocumentPosition"in n?function(e,t){return(e.compareDocumentPosition(t)&16)==16}:"contains"in n?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t=t[r])if(t===e)return!0;return!1},et}),function(e){function t(e,t){return function(){return e.apply(t,arguments)}}function n(){this._callbacks=[]}function r(e){function u(e){return function(n,u){r+=1,s[e]=n,o[e]=u,r===t&&i.done(s,o)}}var t=e.length,r=0,i=new n,s=[],o=[];for(var a=0;a<t;a++)e[a]().then(u(a));return i}function i(e,t,r){var s=new n;return e.length===0?s.done(t,r):e[0](t,r).then(function(t,n){e.splice(0,1),i(e,t,n).then(function(e,t){s.done(e,t)})}),s}function s(e){var t="";if(typeof e=="string")t=e;else{var n=encodeURIComponent;for(var r in e)e.hasOwnProperty(r)&&(t+="&"+n(r)+"="+n(e[r]))}return t}function o(){var e;if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}return e}function u(t,r,i,u){function p(){f.abort(),a.done(e.promise.ETIMEOUT,"")}var a=new n,f,l;i=i||{},u=u||{};try{f=o()}catch(c){return a.done(-1,""),a}l=s(i),t==="GET"&&l&&(r+="?"+l,l=null),f.open(t,r),f.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var h in u)u.hasOwnProperty(h)&&f.setRequestHeader(h,u[h]);var d=e.promise.ajaxTimeout;if(d)var v=setTimeout(p,d);return f.onreadystatechange=function(){d&&clearTimeout(v),f.readyState===4&&(f.status===200?a.done(null,f.responseText):a.done(f.status,f.responseText))},f.send(l),a}function a(e){return function(t,n,r){return u(e,t,n,r)}}n.prototype.then=function(e,n){var r=t(e,n);this._isdone?r(this.error,this.result):this._callbacks.push(r)},n.prototype.done=function(e,t){this._isdone=!0,this.error=e,this.result=t;for(var n=0;n<this._callbacks.length;n++)this._callbacks[n](e,t);this._callbacks=[]},e.promise={Promise:n,join:r,chain:i,ajax:u,get:a("GET"),post:a("POST"),put:a("PUT"),del:a("DELETE"),ENOXHR:1,ETIMEOUT:2,ajaxTimeout:0},typeof define=="function"&&define.amd&&define("lib/promise",[],function(){return e.promise})}(this),function(e,t){if(typeof exports=="object"&&exports)t(exports);else{var n={};t(n),typeof define=="function"&&define.amd?define("lib/mustache",n):e.Mustache=n}}(this,function(e){function a(e,t){return u.call(e,t)}function f(e){return!a(r,e)}function h(e){return typeof e=="function"}function p(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function v(e){return String(e).replace(/[&<>"'\/]/g,function(e){return d[e]})}function m(e){if(!c(e)||e.length!==2)throw new Error("Invalid tags: "+e);return[new RegExp(p(e[0])+"\\s*"),new RegExp("\\s*"+p(e[1]))]}function g(r,u){function E(){if(v&&!g)while(d.length)delete h[d.pop()];else d=[];v=!1,g=!1}u=u||e.tags,r=r||"",typeof u=="string"&&(u=u.split(n));var a=m(u),l=new w(r),c=[],h=[],d=[],v=!1,g=!1,S,x,T,N,C,k;while(!l.eos()){S=l.pos,T=l.scanUntil(a[0]);if(T)for(var L=0,A=T.length;L<A;++L)N=T.charAt(L),f(N)?d.push(h.length):g=!0,h.push(["text",N,S,S+1]),S+=1,N==="\n"&&E();if(!l.scan(a[0]))break;v=!0,x=l.scan(o)||"name",l.scan(t),x==="="?(T=l.scanUntil(i),l.scan(i),l.scanUntil(a[1])):x==="{"?(T=l.scanUntil(new RegExp("\\s*"+p("}"+u[1]))),l.scan(s),l.scanUntil(a[1]),x="&"):T=l.scanUntil(a[1]);if(!l.scan(a[1]))throw new Error("Unclosed tag at "+l.pos);C=[x,T,S,l.pos],h.push(C);if(x==="#"||x==="^")c.push(C);else if(x==="/"){k=c.pop();if(!k)throw new Error('Unopened section "'+T+'" at '+S);if(k[1]!==T)throw new Error('Unclosed section "'+k[1]+'" at '+S)}else x==="name"||x==="{"||x==="&"?g=!0:x==="="&&(a=m(u=T.split(n)))}k=c.pop();if(k)throw new Error('Unclosed section "'+k[1]+'" at '+l.pos);return b(y(h))}function y(e){var t=[],n,r;for(var i=0,s=e.length;i<s;++i)n=e[i],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function b(e){var t=[],n=t,r=[],i,s;for(var o=0,u=e.length;o<u;++o){i=e[o];switch(i[0]){case"#":case"^":n.push(i),r.push(i),n=i[4]=[];break;case"/":s=r.pop(),s[5]=i[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(i)}}return t}function w(e){this.string=e,this.tail=e,this.pos=0}function E(e,t){this.view=e==null?{}:e,this.cache={".":this.view},this.parent=t}function S(){this.cache={}}var t=/\s*/,n=/\s+/,r=/\S/,i=/\s*=/,s=/\s*\}/,o=/#|\^|\/|>|\{|&|=|!/,u=RegExp.prototype.test,l=Object.prototype.toString,c=Array.isArray||function(e){return l.call(e)==="[object Array]"},d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};w.prototype.eos=function(){return this.tail===""},w.prototype.scan=function(e){var t=this.tail.match(e);if(t&&t.index===0){var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n}return""},w.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n},E.prototype.push=function(e){return new E(e,this)},E.prototype.lookup=function(e){var t;if(e in this.cache)t=this.cache[e];else{var n=this;while(n){if(e.indexOf(".")>0){t=n.view;var r=e.split("."),i=0;while(t!=null&&i<r.length)t=t[r[i++]]}else t=n.view[e];if(t!=null)break;n=n.parent}this.cache[e]=t}return h(t)&&(t=t.call(this.view)),t},S.prototype.clearCache=function(){this.cache={}},S.prototype.parse=function(e,t){var n=this.cache,r=n[e];return r==null&&(r=n[e]=g(e,t)),r},S.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof E?t:new E(t);return this.renderTokens(r,i,n,e)},S.prototype.renderTokens=function(t,n,r,i){function u(e){return o.render(e,n,r)}var s="",o=this,a,f;for(var l=0,p=t.length;l<p;++l){a=t[l];switch(a[0]){case"#":f=n.lookup(a[1]);if(!f)continue;if(c(f))for(var d=0,v=f.length;d<v;++d)s+=this.renderTokens(a[4],n.push(f[d]),r,i);else if(typeof f=="object"||typeof f=="string")s+=this.renderTokens(a[4],n.push(f),r,i);else if(h(f)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");f=f.call(n.view,i.slice(a[3],a[5]),u),f!=null&&(s+=f)}else s+=this.renderTokens(a[4],n,r,i);break;case"^":f=n.lookup(a[1]);if(!f||c(f)&&f.length===0)s+=this.renderTokens(a[4],n,r,i);break;case">":if(!r)continue;f=this.parse(h(r)?r(a[1]):r[a[1]]),f!=null&&(s+=this.renderTokens(f,n,r,i));break;case"&":f=n.lookup(a[1]),f!=null&&(s+=f);break;case"name":f=n.lookup(a[1]),f!=null&&(s+=e.escape(f));break;case"text":s+=a[1]}}return s},e.name="mustache.js",e.version="0.8.0",e.tags=["{{","}}"];var x=new S;e.clearCache=function(){return x.clearCache()},e.parse=function(e,t){return x.parse(e,t)},e.render=function(e,t,n){return x.render(e,t,n)},e.to_html=function(t,n,r,i){var s=e.render(t,n,r);if(!h(i))return s;i(s)},e.escape=v,e.Scanner=w,e.Context=E,e.Writer=S}),0,define("hoborglabs/widget",["lib/lodash","lib/bonzo","lib/promise","lib/mustache"],function(e,t,n,r){function a(t,n){this.log("debug","new Widget()"),this.options=e.extend({},i,n),this.data=e.extend({},this.options.defaults,t),this.timer=null,this.name=this.data.name||"no-name",this.id=s++,this.widget=null,this.el=null,this.init()}var i={url:"",conf:"ankh-morpork",widgetGridWrapper:'<div class="grid-item"></div>',widgetWrapper:'<div class="widget"></div>',widgetLoading:'<div class="widget-header">{{name}}</div><div class="widget-body"><h3 class="loading">Loading Widget...</h3></div>',defaults:{dataUrl:null,tick:60,enabled:1,size:"span8",template:"{{{body}}}"}},s=0,o=window,u=o.document;return a.prototype.init=function(){this.log("debug","init "+this.name),this.widget=t(t.create(this.options.widgetWrapper)),this.widget.html(r.to_html(this.options.widgetLoading,this.data)),this.el=t(t.create(this.options.widgetGridWrapper)),this.el.addClass(this.data.size),this.el.addClass("stop"),this.el.append(this.widget),this.log("info","Widget `"+this.name+"` initialised.")},a.prototype.start=function(){this.log("debug","start "+this.name),this.startData(),this.el.removeClass("stop"),this.el.addClass("start")},a.prototype.startData=function(){this.log("debug","startData "+this.name);if(this.data.tick>0){var e=this;this.timer=setInterval(function(){e.reload()},this.data.tick*1e3),this.reload()}else this.reload()},a.prototype.stop=function(){this.log("debug","stop "+this.name),clearInterval(this.timer),this.el.removeClass("start"),this.el.addClass("stop")},a.prototype.reload=function(){this.log("debug","reload "+this.name);var t=e.extend({},this.data);if(this.data.dataUrl)return this.loadData(t);delete t.body;var r=this;n.post(this.options.url,{widget:JSON.stringify(t)}).then(function(n,i){if(n){r.log("error","reload `"+this.name+"` GET `"+this.data.dataUrl+"` error: "+n),t.body="JSON Error",r.render("JSON Error :(");return}wData=JSON.parse(i),r.data=e.extend({},r.data,wData),r.render()})},a.prototype.loadData=function(e){this.log("debug","loadData "+this.name),delete e.body;if(!this.data.dataUrl)return e.body="oh snap, no data Url :(",this.render("oh snap, no data Url :(");var t=this,r={config:JSON.stringify(this.data.config||{})};n.post(this.data.dataUrl,r).then(function(e,n){if(e){t.log("error","loadData `"+this.name+"` GET `"+this.data.dataUrl+"` error: "+e);return}wData=JSON.parse(n),wData&&(t.data.data=wData.data,t.render())});return},a.prototype.render=function(e){this.log("debug","render "+this.name);var t="";if(e)t=e;else var n=this.data.template||"{{{body}}}",t=r.to_html(n,this.data);t?(this.widget.removeClass("hidden"),this.widget.html(t)):this.widget.addClass("hidden");if(this.data.jscallback){var i=window[this.data.jscallback];typeof i=="function"&&i(this.widget)}},window.Hoborglabs.Dashboard.widgetClasses&&(window.Hoborglabs.Dashboard.widgetClasses.HoborgWidget=a),a.prototype.log=function(e,t){},a}),define("hoborglabs/widgetManager",["lib/lodash","lib/bonzo"],function(e,t){function r(e){this.widgets=[],this.isActive=!1,this.config=e}var n={conf:"demo",url:"",callback:function(e){},template:"{{body}}",defaults:{size:"span6"}};return r.prototype.init=function(){for(i in this.config.widgets){if(!this.config.widgetClasses[this.config.widgets[i][0]]){this.log("err","missing widget class `"+this.config.widgets[i][0]+"`");continue}this.widgets.push(new this.config.widgetClasses[this.config.widgets[i][0]](this.config.widgets[i][1]))}for(i in this.widgets)this.appendWidget(this.widgets[i])},r.prototype.appendWidget=function(e){var n=t(window.document.getElementById("dashboard"));n.append(e.el)},r.prototype.start=function(){this.isActive=!0,e.each(this.widgets,function(e){this.activateWidget(e)},this)},r.prototype.stop=function(){this.isActive=!1,e.each(this.widgets,function(e){e.stop()},this)},r.prototype.activateWidget=function(e){this.isActive&&e.start()},r.prototype.onWidgetRender=function(e){},r.prototype.addWidget=function(e){this.widgets.push(e),this.append(e.el),activateWidget(e)},r.prototype.addWidgets=function(e){m=this,$.each(e,function(){addWidget.apply(m,[this])})},r.prototype.log=function(e,t){},r}),require(["lib/ready","hoborglabs/widget","hoborglabs/widgetManager"],function(e,t,n){var r=function(e){return function(t,n){n=e+": "+n,"debug"==t?console.debug(n):"info"==t?console.info(n):console.log(t+": "+n)}},i=r("app");n.prototype.log=r("Hoborg.WidgetManager"),t.prototype.log=r("Hoborg.Widget"),e(function(){if(!window.Hoborglabs||!window.Hoborglabs.Dashboard||!window.Hoborglabs.Dashboard.widgets){i("debug","No widgets found in window.Hoborglabs.Dashboard.widgets");return}var e=new n(window.Hoborglabs.Dashboard);e.init(),e.start(),window.Hoborglabs.WidgetManager=e})}),define("dashboard",function(){});